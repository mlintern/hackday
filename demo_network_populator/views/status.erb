<h1 class="page-header">Status</h1>

<h3>Publishers</h3>
<div class="progress publishers-status">
  <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
</div>

<h3>Business Units</h3>
<div class="progress business-units-status">
  <div class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" style="width: 30%"></div>
</div>

<h3>Users</h3>
<div class="progress users-status">
  <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
</div>

<h3>Categories</h3>
<div class="progress categories-status">
  <div class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
</div>

<h3>Content Types</h3>
<div class="progress content-types-status">
  <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
</div>

<h3>Projects</h3>
<div class="progress projects-status">
  <div class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
</div>

<h3>Languages</h3>
<div class="progress languages-status">
  <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
</div>

<h3>Content</h3>
<div class="progress content-status">
  <div class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
</div>

<script>
function updateProgress () {
	$.ajax({
		url: '/status/check',
		dataType: 'json',
		contentType: "application/json",
		success: function(data) {
			$(".publishers-status .progress-bar").width( ( ( data["publishers"]["count"] / data["publishers"]["max"] ) * 100 ).toString() + "%" );
			$(".business-units-status .progress-bar").width( ( ( data["business_units"]["count"] / data["business_units"]["max"] ) * 100 ).toString() + "%" );
			$(".users-status .progress-bar").width( ( ( data["users"]["count"] / data["users"]["max"] ) * 100 ).toString() + "%" );
			$(".categories-status .progress-bar").width( ( ( data["categories"]["count"] / data["categories"]["max"] ) * 100 ).toString() + "%" );
			$(".content-types-status .progress-bar").width( ( ( data["content_types"]["count"] / data["content_types"]["max"] ) * 100 ).toString() + "%" );
			$(".projects-status .progress-bar").width( ( ( data["projects"]["count"] / data["projects"]["max"] ) * 100 ).toString() + "%" );
			$(".content-status .progress-bar").width( ( ( data["content"]["count"] / data["content"]["max"] ) * 100 ).toString() + "%" );
			$(".languages-status .progress-bar").width( ( ( data["languages"]["count"] / data["languages"]["max"] ) * 100 ).toString() + "%" );
		},
		error: function(data) {
			console.debug(data);
		}
	});
}

setInterval(updateProgress, 2000);
</script>